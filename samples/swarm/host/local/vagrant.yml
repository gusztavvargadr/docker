---
defaults:
  machines:
    core: &machine_core
      providers:
        virtualbox:
        hyperv:
      synced_folders:
        ../../../engine/guest: /vagrant-docker-engine
        ../../guest: /vagrant-docker-swarm
    linux: &machine_linux
      <<: *machine_core
      box: gusztavvargadr/u16s-dc
    windows: &machine_windows
      <<: *machine_core
      box: gusztavvargadr/w16sc-de

environment: host.swarm.samples.docker

machines:
  bootstrap:
    <<: *machine_linux
    provisioners:
      shell:
        path: init.sh
        args: eth0
  manager:
    <<: *machine_linux
    provisioners:
      shell:
        path: join.sh
        args:
          - bootstrap
          - manager
  worker-linux:
    <<: *machine_linux
    provisioners:
      shell:
        path: join.sh
        args:
          - manager
          - worker
  worker-windows:
    <<: *machine_windows
    provisioners:
      shell:
        path: join.ps1
        args:
          - manager
          - worker
