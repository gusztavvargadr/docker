component: engine

hostmanager: true

machines:
  bootstrap:
    synced_folders:
      /src:
        source: ../../..
    provisioners:
      shell_machine_configuration:
        inline: <%= "cd /src/samples/images; ./build.sh docker-machine-configuration; docker run -v /vagrant/.docker/machine:/data gusztavvargadr/docker-machine-configuration bootstrap,linux,windows engine.docker.sandbox.local #{Dir.pwd}/.docker" %>
      shell_server:
        inline: cd /vagrant/.docker/machine; ./server.sh bootstrap
  linux:
    provisioners:
      shell_server:
        inline: cd /vagrant/.docker/machine; ./server.sh linux
  windows:
    provisioners:
      shell_server:
        inline: cd /vagrant/.docker/machine; ./server.ps1 windows
