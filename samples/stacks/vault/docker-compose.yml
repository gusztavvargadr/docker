version: '3'

services:
  default:
    image: library/vault:0.11.1
    volumes:
      - /data/docker/volumes/vault/default/config:/vault/config
    networks:
      - default
      - consul
    ports:
      - 8200:8200
    command:
      - server
    deploy:
      mode: replicated
      replicas: 1
      placement:
        constraints:
          - node.platform.os == linux

networks:
  default:
  consul:
    external:
      name: consul_default
